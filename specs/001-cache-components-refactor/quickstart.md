# Quickstart: Cache Components Sweep

1. **Boot the environment**: `pnpm install` (if not already) then `pnpm dev`. Verify `next.config.mjs` already enables `cacheComponents: true` and that the dashboard shell renders immediately when the dev server starts.
2. **Audit `/dashboard/*` pages**: Open each `app/dashboard/**/page.tsx` and identify runtime APIs (`searchParams`, `params`, `cookies()`, `headers()`). Extract those calls into dedicated runtime sections placed inside `<Suspense fallback={...}>` blocks that reuse the shared skeletons (e.g., `StatsSkeleton`, `FiltersSkeleton`, `CandidatesListSkeleton`).
3. **Add `use cache` scopes for repeated data**: Wrap Prisma queries that feed stats, lists, and cards in `'use cache'` segments with `cacheLife(...)` declarations, and attach `cacheTag("candidates")`, `cacheTag("positions")`, or `cacheTag("interviews")` as appropriate. Use `revalidateTag` when the data feeds multiple sections.
4. **Wire server actions to tags**: Confirm every action that mutates candidates, positions, or interviews calls `requireUser()` and invokes `updateTag(tag)` (`tag` matches the cache tag used by the runtime data). This keeps cached statistics fresh even though the shell stays cached.
5. **Document the pattern**: Update `README.md` (Cache Components Strategy section) and `docs/CACHE_IMPLEMENTATION.md` to describe the streaming sections, the shared skeletons, and how to add new runtime segments safely.
6. **Verify**: Run `pnpm lint`, `pnpm build`, and visit `/dashboard/candidates` & `/dashboard/interviews` to ensure the skeletons appear immediately and `next build` no longer emits the `Uncached data was accessed outside of <Suspense>` warning. Server actions should trigger the appropriate `updateTag` calls, which you can confirm by checking fixtures or logs.
